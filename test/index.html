<!DOCTYPE html>
<meta charset="utf-8">
<title>test</title>

<script src="../bower_components/obtain-unicode/obtain-unicode.js"></script>
<script src="../node_modules/urlsearchparams/urlsearchparams.js"></script>
<script>
function require(name) {
  if (name === "urlsearchparams") {
    return { URLSearchParams: URLSearchParams };
  }
}
</script>
<script src="../url.js"></script>

<!--script src="https://rawgit.com/w3c/testharness.js/master/testharness.js"></script>
<script src="https://rawgit.com/w3c/testharness.js/master/testharnessreport.js"></script>
<script src="urltestparser.js"></script>
<div id="log"></div>
<script>

// https://github.com/w3c/web-platform-tests/tree/master/url

var setup = async_test('Loading dataâ€¦');
setup.step(function() {
  var request = new XMLHttpRequest();
  request.open('GET', 'urltestdata.txt');
  request.send();
  request.responseType = 'text';
  request.onload = setup.step_func(function() {
    runURLTests(request.response);
    setup.done();
  });
});

function setBase(base) {
  document.getElementById('base').href = base;
}


function assert(actual, expected, message) {
  console.assert(actual === expected, message + '\nact: ' + actual + '\nexp: ' + expected);
}

function t(urltests) {

  var expected = urltests.shift();

  try {
    var url = new URL(expected.input, expected.base);

    if (expected.protocol === ':' && url.protocol !== ':') {
      assert('Expected URL to fail parsing');
    }

    assert(url.protocol, expected.protocol, 'scheme');
    assert(url.hostname, expected.host, 'host');
    assert(url.port, expected.port, 'port');
    assert(url.pathname, expected.path, 'path');
    assert(url.search, expected.search, 'search');
    assert(url.hash, expected.hash, 'hash');
    assert(url.href, expected.href, 'href');
  } catch(err) {
    if (expected.invalid === false) {
      console.log(expected, urltests.length);
      console.log(err);
    }
  } finally {
    setTimeout(function() {
      t(urltests);
    }, 300);
  }
}


function runURLTests(raw) {
  var urltests = URLTestParser(raw);
  t(urltests);
}
</script-->
